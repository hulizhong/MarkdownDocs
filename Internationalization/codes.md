[TOC]



## ReadMe



- 原则
    - 模块内部用，`wstring`.
    - 模块间调用用，`string format utf-8`.
    - ...



## UTF-8

UTF-8是一种变长编码，对于一个Unicode的字符被编码成1至4个字节，其中绝大部分的中文用3个字节编码；少数中文用到了4个字节编码。

### 问题
- utf8 BOM VS utf8

	> 一个带标签，一个没有标签。 
	> BOM是Byte Order Mark（定义字节顺序），因为在网络传输中分两种顺序：大头和小头。
	> 但是因为兼容性，带BOM的utf-8在一些browser中显示为乱码。



## Linux

### Linux中的语言设置

rabin, todo.

en_US.UTF-8  ---->  en英文语言_US美国地区.UTF-8字符集

https://www.jianshu.com/p/368b556a32c6

查看当前系统语言集

```bash
# locale -av
# locale -a  当前系统支持的语言环境（这只是说明了安装了哪些语言集）

root@~# locale 查看当前系统的语言环境

root@~# echo $LANG
en_US.UTF-8
root@~# export LANG=en_US.UTF-8

root@debian:~# cat /etc/default/locale 
#  File generated by update-locale
LANG="en_HK.UTF-8"
LANGUAGE="en_HK:en"
```

修改当前系统语言集

```bash
# 更改locale法一
root@~# apt-get install locales  安装
root@~# vim /etc/locale.gen   打开需要配置的语言环境
root@~# locale-gen  生成新的语言环境

# 更改locale法二
root@~# dpkp-reconfigure locales，
...
```



libc中的API设置

```cpp
#include <locale.h>
char* setlocale(int category, const char* locale);
	//LC_CTYPE 语言符号及其分类，如setlocale(LC_CTYPE, "en_US.UTF-8");
	//
char* getenv(const char* name);
```



1、LC_CTYPE 语言符号及其分类; 
2、数字(LC_NUMERIC) 
3、比较和排序习惯(LC_COLLATE) 
4、时间显示格式(LC_TIME) 
5、货币单位(LC_MONETARY) 
6、信息主要是提示信息,错误信息,状态信息,标题,标签,按钮和菜单等(LC_MESSAGES) 
7、姓名书写方式(LC_NAME) 
8、地址书写方式(LC_ADDRESS) 
9、电话号码书写方式(LC_TELEPHONE) 
10、度量衡表达方式 (LC_MEASUREMENT) 
11、默认纸张尺寸大小(LC_PAPER) 
12、对locale自身包含信息的概述(LC_IDENTIFICATION)。





## Windows

简体中文默认使用`GBK`，它是`gb2312`的扩展；
台湾的繁体中文使用`big5`；（这些繁体跟`gbk`中繁体不是一个编码系统）

```bash
chcp 65001 #更改cmd窗口为utf-8编码（如果窗口不能正常显示汉字，那么需要将字体修改为True Type字体"Lucida Console"）
chcp 936  #gbk
chcp 437  #美国英语
```





## Mac



## boost.locale.conv

used for `Character Set Conversions`, support `char, wchar_t`, experimental support c++0x `char16_t, char32_t`.

```cpp
//接收一个转码失败时的策略：skip（忽略该字符，尽最大努力转码），stop（停止、并抛出异常），默认为skip.
boost::locale::conv::to_utf();
boost::locale::conv::from_utf();
boost::locale::conv::utf_to_utf();

char;
wchar_t;
boost::locale::generator::locale_cache_enabled(true);
```

https://www.boost.org/doc/libs/1_53_0/libs/locale/doc/html/group__codepage.html





